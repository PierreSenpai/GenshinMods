; Merged Mod: .\XianyunMod01\Xianyun.ini, .\XianyunMod02\Xianyun.ini, .\XianyunMod03\Xianyun.ini

; Constants ---------------------------

[Constants]
global persist $outfit = 0
global persist $moresfw = 0
global persist $metals = 0
global persist $bracelet = 0
global $swapvar = 0
global $ActiveCharacter = 0

[KeySwap]
condition = $ActiveCharacter == 1
key = ]
type = cycle
$outfit = 0,1,2

[KeySwapSFW]
condition = $ActiveCharacter == 1
key = =
type = cycle
$moresfw = 0,1

[KeySwapMetal]
condition = $ActiveCharacter == 1
key = [
type = cycle
$metals = 0,1,2

[KeySwapBracelet]
condition = $ActiveCharacter == 1
key = _
type = cycle
$bracelet = 0,1,2

[Present]
post $ActiveCharacter = 0
$swapvar = 3*$moresfw + $outfit

; Overrides ---------------------------

[TextureOverrideXianyunPosition]
hash = 39838e8f
run = CommandListXianyunPosition
$ActiveCharacter = 1

[TextureOverrideXianyunBlend]
hash = d853ccb4
run = CommandListXianyunBlend

[TextureOverrideXianyunTexcoord]
hash = 3e5e310f
run = CommandListXianyunTexcoord

[TextureOverrideXianyunVertexLimitRaise]
hash = f18ee70e

[TextureOverrideXianyunIB]
hash = 7f79ea6e
run = CommandListXianyunIB

[TextureOverrideXianyunHead]
hash = 7f79ea6e
match_first_index = 0
run = CommandListXianyunHead

[TextureOverrideXianyunBody]
hash = 7f79ea6e
match_first_index = 29841
run = CommandListXianyunBody

[TextureOverrideXianyunDress]
hash = 7f79ea6e
match_first_index = 65361
run = CommandListXianyunDress

; CommandList -------------------------

[CommandListXianyunPosition]
if $swapvar == 0
	vb0 = ResourceXianyunPosition.0
else if $swapvar == 1
	vb0 = ResourceXianyunPosition.1
else if $swapvar == 2
	vb0 = ResourceXianyunPosition.2
else if $swapvar == 3
	vb0 = ResourceXianyunPosition.3
else if $swapvar == 4
	vb0 = ResourceXianyunPosition.4
else if $swapvar == 5
	vb0 = ResourceXianyunPosition.5
endif

[CommandListXianyunBlend]
if $swapvar == 0
	vb1 = ResourceXianyunBlend.0
	handling = skip
	draw = 49476,0
else if $swapvar == 1
	vb1 = ResourceXianyunBlend.1
	handling = skip
	draw = 45990,0
else if $swapvar == 2
	vb1 = ResourceXianyunBlend.2
	handling = skip
	draw = 47638,0
else if $swapvar == 3
	vb1 = ResourceXianyunBlend.3
	handling = skip
	draw = 49482,0
else if $swapvar == 4
	vb1 = ResourceXianyunBlend.4
	handling = skip
	draw = 45996,0
else if $swapvar == 5
	vb1 = ResourceXianyunBlend.5
	handling = skip
	draw = 47644,0
endif

[CommandListXianyunTexcoord]
if $swapvar == 0
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.0
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.0
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.0
	endif
else if $swapvar == 1
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.1
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.1
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.1
	endif
else if $swapvar == 2
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.2
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.2
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.2
	endif
else if $swapvar == 3
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.3
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.3
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.3
	endif
else if $swapvar == 4
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.4
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.4
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.4
	endif
else if $swapvar == 5
	if $bracelet == 0
	vb1 = ResourceXianyunTexcoord.5
	else if $bracelet == 1
	vb1 = ResourceXianyunTexcoordWalnut.5
	else if $bracelet == 2
	vb1 = ResourceXianyunTexcoordWood.5
	endif
endif

[CommandListXianyunIB]
if $swapvar == 0
	handling = skip
	drawindexed = auto
else if $swapvar == 1
	handling = skip
	drawindexed = auto
else if $swapvar == 2
	handling = skip
	drawindexed = auto
else if $swapvar == 3
	handling = skip
	drawindexed = auto
else if $swapvar == 4
	handling = skip
	drawindexed = auto
else if $swapvar == 5
	handling = skip
	drawindexed = auto
endif

[CommandListXianyunHead]
if $swapvar == 0
	ib = ResourceXianyunHeadIB.0
else if $swapvar == 1
	ib = ResourceXianyunHeadIB.1
else if $swapvar == 2
	ib = ResourceXianyunHeadIB.2
else if $swapvar == 3
	ib = ResourceXianyunHeadIB.3
else if $swapvar == 4
	ib = ResourceXianyunHeadIB.4
else if $swapvar == 5
	ib = ResourceXianyunHeadIB.5
endif
if $metals == 0
	ps-t0 = ResourceXianyunFullNormalMap.0
	ps-t1 = ResourceXianyunFullDiffuse.0
	ps-t2 = ResourceXianyunFullLightMap.0
	run = CommandList\global\ORFix\ORFix
else if $metals == 1
	ps-t0 = ResourceXianyunFullNormalMap.1
	ps-t1 = ResourceXianyunFullDiffuse.1
	ps-t2 = ResourceXianyunFullLightMap.1
	run = CommandList\global\ORFix\ORFix
else if $metals == 2
	ps-t0 = ResourceXianyunFullNormalMap.2
	ps-t1 = ResourceXianyunFullDiffuse.2
	ps-t2 = ResourceXianyunFullLightMap.2
	run = CommandList\global\ORFix\ORFix
endif

[CommandListXianyunBody]
if $swapvar == 0
	ib = ResourceXianyunBodyIB.0
else if $swapvar == 1
	ib = ResourceXianyunBodyIB.1
else if $swapvar == 2
	ib = ResourceXianyunBodyIB.2
else if $swapvar == 3
	ib = ResourceXianyunBodyIB.3
else if $swapvar == 4
	ib = ResourceXianyunBodyIB.4
else if $swapvar == 5
	ib = ResourceXianyunBodyIB.5
endif
if $metals == 0
	ps-t0 = ResourceXianyunFullNormalMap.0
	ps-t1 = ResourceXianyunFullDiffuse.0
	ps-t2 = ResourceXianyunFullLightMap.0
	run = CommandList\global\ORFix\ORFix
else if $metals == 1
	ps-t0 = ResourceXianyunFullNormalMap.1
	ps-t1 = ResourceXianyunFullDiffuse.1
	ps-t2 = ResourceXianyunFullLightMap.1
	run = CommandList\global\ORFix\ORFix
else if $metals == 2
	ps-t0 = ResourceXianyunFullNormalMap.2
	ps-t1 = ResourceXianyunFullDiffuse.2
	ps-t2 = ResourceXianyunFullLightMap.2
	run = CommandList\global\ORFix\ORFix
endif

[CommandListXianyunDress]
if $swapvar == 0
	ib = ResourceXianyunDressIB.0
else if $swapvar == 1
	ib = ResourceXianyunDressIB.1
else if $swapvar == 2
	ib = ResourceXianyunDressIB.2
else if $swapvar == 3
	ib = ResourceXianyunDressIB.3
else if $swapvar == 4
	ib = ResourceXianyunDressIB.4
else if $swapvar == 5
	ib = ResourceXianyunDressIB.5
endif
if $metals == 0
	ps-t0 = ResourceXianyunFullNormalMap.0
	ps-t1 = ResourceXianyunFullDiffuse.0
	ps-t2 = ResourceXianyunFullLightMap.0
	ps-t69 = ResourceXianyunDressTransparencyMap.0
	run = CommandList\global\ORFix\ORFix
else if $metals == 1
	ps-t0 = ResourceXianyunFullNormalMap.1
	ps-t1 = ResourceXianyunFullDiffuse.1
	ps-t2 = ResourceXianyunFullLightMap.1
	ps-t69 = ResourceXianyunDressTransparencyMap.1
	run = CommandList\global\ORFix\ORFix
else if $metals == 2
	ps-t0 = ResourceXianyunFullNormalMap.2
	ps-t1 = ResourceXianyunFullDiffuse.2
	ps-t2 = ResourceXianyunFullLightMap.2
	ps-t69 = ResourceXianyunDressTransparencyMap.2
	run = CommandList\global\ORFix\ORFix
endif

; Resources ---------------------------

[ResourceXianyunPosition.0]
type = Buffer
stride = 40
filename = .\XianyunMod01\XianyunPosition.buf

[ResourceXianyunBlend.0]
type = Buffer
stride = 32
filename = .\XianyunMod01\XianyunBlend.buf

[ResourceXianyunTexcoord.0]
type = Buffer
stride = 20
filename = .\XianyunMod01\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.0]
type = Buffer
stride = 20
filename = .\XianyunMod01\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.0]
type = Buffer
stride = 20
filename = .\XianyunMod01\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.0]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHead.ib

[ResourceXianyunBodyIB.0]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunBody.ib

[ResourceXianyunDressIB.0]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunDress.ib

[ResourceXianyunFullNormalMap.0]
filename = .\Textures\XianyunFullNormalMap.dds

[ResourceXianyunFullDiffuse.0]
filename = .\Textures\XianyunFullDiffuse01.dds

[ResourceXianyunFullLightMap.0]
filename = .\Textures\XianyunFullLightMap.dds

[ResourceXianyunDressTransparencyMap.0]
filename = .\Textures\XianyunDressTransparencyMap.dds

[ResourceXianyunPosition.1]
type = Buffer
stride = 40
filename = .\XianyunMod02\XianyunPosition.buf

[ResourceXianyunBlend.1]
type = Buffer
stride = 32
filename = .\XianyunMod02\XianyunBlend.buf

[ResourceXianyunTexcoord.1]
type = Buffer
stride = 20
filename = .\XianyunMod02\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.1]
type = Buffer
stride = 20
filename = .\XianyunMod02\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.1]
type = Buffer
stride = 20
filename = .\XianyunMod02\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.1]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHead.ib

[ResourceXianyunBodyIB.1]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunBody.ib

[ResourceXianyunDressIB.1]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod02\XianyunDress.ib

[ResourceXianyunFullNormalMap.1]
filename = .\Textures\XianyunFullNormalMap.dds

[ResourceXianyunFullDiffuse.1]
filename = .\Textures\XianyunFullDiffuse02.dds

[ResourceXianyunFullLightMap.1]
filename = .\Textures\XianyunFullLightMap.dds

[ResourceXianyunDressTransparencyMap.1]
filename = .\Textures\XianyunDressTransparencyMap.dds

[ResourceXianyunPosition.2]
type = Buffer
stride = 40
filename = .\XianyunMod03\XianyunPosition.buf

[ResourceXianyunBlend.2]
type = Buffer
stride = 32
filename = .\XianyunMod03\XianyunBlend.buf

[ResourceXianyunTexcoord.2]
type = Buffer
stride = 20
filename = .\XianyunMod03\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.2]
type = Buffer
stride = 20
filename = .\XianyunMod03\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.2]
type = Buffer
stride = 20
filename = .\XianyunMod03\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.2]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHead.ib

[ResourceXianyunBodyIB.2]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod03\XianyunBody.ib

[ResourceXianyunDressIB.2]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod03\XianyunDress.ib

[ResourceXianyunFullNormalMap.2]
filename = .\Textures\XianyunFullNormalMap.dds

[ResourceXianyunFullDiffuse.2]
filename = .\Textures\XianyunFullDiffuse03.dds

[ResourceXianyunFullLightMap.2]
filename = .\Textures\XianyunFullLightMap.dds

[ResourceXianyunDressTransparencyMap.2]
filename = .\Textures\XianyunDressTransparencyMap.dds

[ResourceXianyunPosition.3]
type = Buffer
stride = 40
filename = .\XianyunModSFW01\XianyunPosition.buf

[ResourceXianyunBlend.3]
type = Buffer
stride = 32
filename = .\XianyunModSFW01\XianyunBlend.buf

[ResourceXianyunTexcoord.3]
type = Buffer
stride = 20
filename = .\XianyunModSFW01\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.3]
type = Buffer
stride = 20
filename = .\XianyunModSFW01\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.3]
type = Buffer
stride = 20
filename = .\XianyunModSFW01\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.3]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHeadWalnut.ib

[ResourceXianyunBodyIB.3]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW01\XianyunBody.ib

[ResourceXianyunDressIB.3]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW01\XianyunDress.ib

[ResourceXianyunPosition.4]
type = Buffer
stride = 40
filename = .\XianyunModSFW02\XianyunPosition.buf

[ResourceXianyunBlend.4]
type = Buffer
stride = 32
filename = .\XianyunModSFW02\XianyunBlend.buf

[ResourceXianyunTexcoord.4]
type = Buffer
stride = 20
filename = .\XianyunModSFW02\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.4]
type = Buffer
stride = 20
filename = .\XianyunModSFW02\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.4]
type = Buffer
stride = 20
filename = .\XianyunModSFW02\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.4]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHead.ib

[ResourceXianyunBodyIB.4]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW01\XianyunBody.ib

[ResourceXianyunDressIB.4]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW02\XianyunDress.ib

[ResourceXianyunPosition.5]
type = Buffer
stride = 40
filename = .\XianyunModSFW03\XianyunPosition.buf

[ResourceXianyunBlend.5]
type = Buffer
stride = 32
filename = .\XianyunModSFW03\XianyunBlend.buf

[ResourceXianyunTexcoord.5]
type = Buffer
stride = 20
filename = .\XianyunModSFW03\XianyunTexcoord.buf

[ResourceXianyunTexcoordWalnut.5]
type = Buffer
stride = 20
filename = .\XianyunModSFW03\XianyunTexcoordWalnut.buf

[ResourceXianyunTexcoordWood.5]
type = Buffer
stride = 20
filename = .\XianyunModSFW03\XianyunTexcoordWood.buf

[ResourceXianyunHeadIB.5]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunMod01\XianyunHead.ib

[ResourceXianyunBodyIB.5]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW03\XianyunBody.ib

[ResourceXianyunDressIB.5]
type = Buffer
format = DXGI_FORMAT_R32_UINT
filename = .\XianyunModSFW03\XianyunDress.ib

; .ini generated by GIMI (Genshin-Impact-Model-Importer) mod merger script
; If you have any issues or find any bugs, please open a ticket at https://github.com/SilentNightSound/GI-Model-Importer/issues or contact SilentNightSound#7430 on discord